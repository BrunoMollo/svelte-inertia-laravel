---
description: Define the checks that must be done after modifying the code
globs:
alwaysApply: true
---

# Cursor Rule: Project Validation Commands

## Intent

Ensure that any change made to the codebase is validated against formatting, linting, style, and automated tests before being considered complete.

## Rule

Before marking a task, fix, refactor, or feature as **done**, the agent **must** run the following commands locally and ensure they complete **without errors**:

```bash
pnpm format  > /dev/null && pnpm lint:fix > /dev/null
./vendor/bin/pint
pnpm lint
php artisan test --compact
pnpm check
pnpm build
```

## Expectations

* All commands must exit with status code `0`
* No skipped steps
* No manual justification for skipping a command is allowed
* If any command fails, the agent must:

  1. Fix the reported issues
  2. Re-run **all** commands from the top
  3. Repeat until all commands pass

## Scope

This rule applies to:

* Backend (Laravel, PHP)
* Frontend (JS/TS, Svelte/Inertia)
* Shared configs and tooling
* Database changes (migrations, seeders, factories)

## Rationale

* `./vendor/bin/pint` → enforces Laravel/PHP code style
* `php artisan test --compact` → guarantees functional correctness and data consistency
* `pnpm format  > /dev/null && pnpm lint:fix > /dev/null` → ensures consistent formatting and fix linting errors fixable (does not provide queues to change code)
* `pnpm lint` → Gives the linitng error thant could not be fixed automatically
* `pnpm check` → ensures the frontend is compied by typescript correctly
* `pnpm build` → ensures the frontend builts correctly

## Definition of Done

A task is considered **complete** only if **all four commands pass successfully** in a clean working tree.


## Wait until the last moment to check

While editing the code is normal that this test fail, wait until the last second to check, but don't finish a task without checking.
Don not over abuse this checks, I don't want to waste time spaming them.

## Skip if the task minor
If the task is really small (ej: a small style fix) and it is not relevant to the codebase, skip the check.
But if it a full feature, it is better to check it.





